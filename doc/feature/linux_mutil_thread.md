# linux因多线程及生命周期导致崩溃问题

## 背景：

在一次开发中，在实际的生产环境中，在使用nohup进行守护进程后，关闭xshell窗口，进程被杀了。（该bug之前出现挺久了，现在是补记录）

## 问题定位：

* 只在该机器进行崩溃，怀疑是xshell兼容性问题。因此写了一个demo程序，进行daemon。关闭xshell后，该demo程序未崩溃。
* 开启coredump，生成coredump程序，找到对应的debug包，进行调试。但在这一步中，未定位到实际的问题。随机崩溃。
* 跟踪变量生命周期，发现异步回调时，该变量已经被析构，因此导致了崩溃，修改对应代码，放入环境，未出现崩溃问题。